# 동시성에 대해서

## 낙관적 락

 > 큰 맥락: 
 > > 낙관적 락은 데이터에 대한 충돌이 드물다고 가정하고, 충돌이 발생할 경우에만 처리합니다. 
 > > 데이터가 수정될 가능성이 낮거나 충돌을 처리할 방법이 있는 경우 유용합니다.

 > 자세한 설명: 
 > > 예를 들어, 책을 빌릴 때 대출 중인 책이 다른 사람에 의해 대출되지 않을 것이라고 가정합니다. 
 > >  책이 다른 사람이 대출 중이라면, 대출 요청이 실패할 것입니다. 
 > > 데이터베이스에서 낙관적 락은 버전 번호나 타임스탬프를 사용하여 충돌 여부를 확인하고, 
 > > 충돌이 발생하면 롤백하거나 다시 시도하도록 합니다.

 > 비유: 
 > > 도서관에서 책을 빌릴 때, 책의 상태를 확인하지 않고 빌리려고 하는 것과 같습니다. 
 > > 만약 다른 사람이 책을 대출 중이면, 시스템은 이를 감지하고 대출 요청을 실패로 처리합니다.

## 비관적 락

 > 큰 맥락: 
 > > 비관적 락은 데이터가 충돌할 가능성이 높다고 가정하고, 
 > 데이터에 대한 접근을 미리 잠가서 다른 스레드가 접근하지 못하도록 합니다.

 > 자세한 설명: 
 > > 예를 들어, 공용의 문서를 편집할 때, 문서를 열면 다른 사람이 동시에 열 수 없도록 
 > > 잠금 장치를 거는 것입니다. 
 > > 이렇게 하면 동시에 편집하여 충돌이 발생하는 것을 방지할 수 있습니다. 
 > > 데이터베이스에서는 SELECT ... FOR UPDATE와 같은 쿼리를 사용하여 비관적 락을 구현합니다.

 > 비유: 
 > > 공용 회의실에서 여러 사람이 동시에 회의실을 예약하려 할 때, 
 > > 회의실의 예약 가능 여부를 체크하고, 한 사람이 예약하면 다른 사람은 예약할 수 
 > > 없도록 잠금 장치를 설치하는 것입니다.

## redis 를 이용한 방법

 > 큰 맥락: 
 > > Redis와 같은 외부 저장소는 빠른 접근 속도와 높은 동시성 처리를 제공하며, 
 > > 캐싱 및 분산 락 관리 등 다양한 용도로 사용됩니다.

 > 자세한 설명: 
 > > 예를 들어, 데이터베이스에 대한 요청이 너무 많아 지연이 발생할 때, 
 > > Redis를 캐시로 사용하여 자주 조회되는 데이터를 빠르게 제공하고, 
 > > 분산 락을 통해 여러 인스턴스 간의 동기화를 관리할 수 있습니다.

 > 비유: 
 > > 대형 쇼핑몰에서 고객이 자주 찾는 제품 정보를 빠르게 제공하기 위해 매장에 
 > > 별도의 정보 디스플레이를 설치하는 것과 같습니다. 고객이 특정 제품을 검색하면, 
 > > 매장에 있는 디스플레이에서 빠르게 정보를 제공받을 수 있습니다.
 
 > > 분산 Lock과 처리 형태 :
 > redis를 가지고 낙관적 락과 비관적 락 성정
 > > 각 was 의 하위에 rdb 에서 쿠폰과 수량을 각각 들고 있는다.
 > > 1. 쿠폰을 소비할 시 요청을 redis 에서 받고 lock 을 걸어 각 데이터 베이스의 수량을 - 하는 방법
